<?xml version='1.0' encoding='utf-8'?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="700" viewBox="0 0 900 700">
  <rect width="900" height="700" fill="#2D2D2D" />
  <text x="450" y="30" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle">BP_Ship_NPC_Trader - AI Decision Flow</text>
  <rect x="53" y="63" width="300" height="80" rx="8" fill="#000000" opacity="0.3" />
  <rect x="50" y="60" width="300" height="80" rx="8" fill="none" stroke="#000000" stroke-width="2" />
  <rect x="50" y="60" width="300" height="32" rx="8" fill="#C80000" />
  <text x="60" y="82" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="14" font-weight="bold">EVENT: AI Update Tick</text>
  <rect x="50" y="92" width="300" height="48" fill="#1E1E1E" />
  <circle cx="345" cy="117" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="330" y="121" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end" />
  <rect x="53" y="183" width="320" height="120" rx="8" fill="#000000" opacity="0.3" />
  <rect x="50" y="180" width="320" height="120" rx="8" fill="none" stroke="#000000" stroke-width="2" />
  <rect x="50" y="180" width="320" height="32" rx="8" fill="#1B4F72" />
  <text x="60" y="202" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Get AI State</text>
  <rect x="50" y="212" width="320" height="88" fill="#1E1E1E" />
  <circle cx="55" cy="232" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="70" y="236" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="start">Exec</text>
  <circle cx="365" cy="232" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="350" y="236" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end" />
  <circle cx="365" cy="252" r="6" fill="#00FFFF" stroke="#000000" stroke-width="1.5" />
  <text x="350" y="256" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end">Current State</text>
  <rect x="53" y="343" width="320" height="180" rx="8" fill="#000000" opacity="0.3" />
  <rect x="50" y="340" width="320" height="180" rx="8" fill="none" stroke="#000000" stroke-width="2" />
  <rect x="50" y="340" width="320" height="32" rx="8" fill="#FF8C00" />
  <text x="60" y="362" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="14" font-weight="bold">SWITCH: State</text>
  <rect x="50" y="372" width="320" height="148" fill="#1E1E1E" />
  <circle cx="55" cy="392" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="70" y="396" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="start">Exec</text>
  <circle cx="55" cy="412" r="6" fill="#00FFFF" stroke="#000000" stroke-width="1.5" />
  <text x="70" y="416" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="start">Selection</text>
  <circle cx="365" cy="392" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="350" y="396" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end">Trading</text>
  <circle cx="365" cy="422" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="350" y="426" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end">Traveling</text>
  <circle cx="365" cy="452" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="350" y="456" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end">Idle</text>
  <circle cx="365" cy="482" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="350" y="486" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end">Default</text>
  <rect x="463" y="183" width="380" height="100" rx="8" fill="#000000" opacity="0.3" />
  <rect x="460" y="180" width="380" height="100" rx="8" fill="none" stroke="#000000" stroke-width="2" />
  <rect x="460" y="180" width="380" height="32" rx="8" fill="#1B4F72" />
  <text x="470" y="202" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Execute Trade Behavior</text>
  <rect x="460" y="212" width="380" height="68" fill="#1E1E1E" />
  <circle cx="465" cy="232" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="480" y="236" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="start">Exec</text>
  <circle cx="835" cy="232" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="820" y="236" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end" />
  <rect x="463" y="323" width="380" height="100" rx="8" fill="#000000" opacity="0.3" />
  <rect x="460" y="320" width="380" height="100" rx="8" fill="none" stroke="#000000" stroke-width="2" />
  <rect x="460" y="320" width="380" height="32" rx="8" fill="#1B4F72" />
  <text x="470" y="342" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Execute Travel Behavior</text>
  <rect x="460" y="352" width="380" height="68" fill="#1E1E1E" />
  <circle cx="465" cy="372" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="480" y="376" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="start">Exec</text>
  <circle cx="835" cy="372" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="820" y="376" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end" />
  <rect x="463" y="463" width="380" height="100" rx="8" fill="#000000" opacity="0.3" />
  <rect x="460" y="460" width="380" height="100" rx="8" fill="none" stroke="#000000" stroke-width="2" />
  <rect x="460" y="460" width="380" height="32" rx="8" fill="#1B4F72" />
  <text x="470" y="482" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Execute Idle Behavior</text>
  <rect x="460" y="492" width="380" height="68" fill="#1E1E1E" />
  <circle cx="465" cy="512" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="480" y="516" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="start">Exec</text>
  <circle cx="835" cy="512" r="6" fill="#FFFFFF" stroke="#000000" stroke-width="1.5" />
  <text x="820" y="516" fill="#FFFFFF" font-family="Arial, sans-serif" font-size="12" text-anchor="end" />
  <path d="M 350 117 C 200.0 117, 200.0 232, 50 232" stroke="#FFFFFF" stroke-width="3" fill="none" opacity="0.8" />
  <path d="M 370 232 C 210.0 232, 210.0 392, 50 392" stroke="#FFFFFF" stroke-width="3" fill="none" opacity="0.8" />
  <path d="M 370 392 C 415.0 392, 415.0 232, 460 232" stroke="#FFFFFF" stroke-width="3" fill="none" opacity="0.8" />
  <path d="M 370 422 C 415.0 422, 415.0 372, 460 372" stroke="#FFFFFF" stroke-width="3" fill="none" opacity="0.8" />
  <path d="M 370 452 C 415.0 452, 415.0 512, 460 512" stroke="#FFFFFF" stroke-width="3" fill="none" opacity="0.8" />
</svg>